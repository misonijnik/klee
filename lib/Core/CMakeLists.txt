#===------------------------------------------------------------------------===#
#
#                     The KLEE Symbolic Virtual Machine
#
# This file is distributed under the University of Illinois Open Source
# License. See LICENSE.TXT for details.
#
#===------------------------------------------------------------------------===#
klee_add_component(kleeCore
  AddressManager.cpp  
  AddressSpace.cpp
  BackwardSearcher.cpp
  BidirectionalSearcher.cpp
  CallPathManager.cpp
  Composer.cpp
  Context.cpp
  CoreStats.cpp
  CXXTypeSystem/CXXTypeManager.cpp
  DistanceCalculator.cpp
  ExecutionState.cpp
  Executor.cpp
  ExecutorUtil.cpp
  ExternalDispatcher.cpp
  ImpliedValue.cpp
  Initializer.cpp
  Memory.cpp
  MemoryManager.cpp
  ObjectManager.cpp
  PForest.cpp
  PTree.cpp
  ProofObligation.cpp
  Searcher.cpp
  SeedInfo.cpp
  SeedMap.cpp
  SpecialFunctionHandler.cpp
  StatsTracker.cpp
  TargetCalculator.cpp
  TargetedExecutionReporter.cpp
  TargetedExecutionManager.cpp
  TargetManager.cpp
  TimingSolver.cpp
  TypeManager.cpp
  UserSearcher.cpp
)

# TODO: Work out what the correct LLVM components are for
# kleeCore.
set(LLVM_COMPONENTS
  core
  executionengine
  mcjit
  native
  support
)

klee_get_llvm_libs(LLVM_LIBS ${LLVM_COMPONENTS})
target_link_libraries(kleeCore PRIVATE ${LLVM_LIBS} ${SQLITE3_LIBRARIES})
target_link_libraries(kleeCore PUBLIC
  kleeBasic
  kleeModule
  kleaverSolver
  kleaverExpr
  kleeSupport
)

install(TARGETS kleeCore
        EXPORT run_klee
        DESTINATION "${RUN_KLEE_LIB_DEST}"
        )
